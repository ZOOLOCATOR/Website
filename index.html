<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dream Style</title>
    <link rel="icon" type="image/png" sizes="192x192" href="img/android--chrome-192x192.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="shortcut icon" href="img/android--chrome-192x192.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/owl.carousel@2.3.4/dist/assets/owl.carousel.min.css">
    <script src="https://www.paypal.com/sdk/js?client-id=ASbCrjH7ghk7md94mZ3dWfJOymGj1a1v7MKFk22QmMOcfoZJNTtI7UKKTOQWFgUHdLptHWhdOQFBDtqJ&currency=USD"></script>
    

    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">



    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D9REDB493L"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-D9REDB493L');
    </script>
</head>

<body>

    <header>
        <nav class="navbar">
            <div class="container-fluid">
                <div class="d-flex align-items-center">
                    <button class="navbar-toggler" type="button" id="menu-toggle">
                        &#9776; <!-- Icono hamburguesa -->
                    </button>
                    <div class="logo ms-2">Dream Style</div>
                </div>
                <ul class="nav-links" id="nav-links">
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="Hombres.html">Hombres</a></li>
                    <li><a href="Mujeres.html">Mujeres</a></li>
                    <li><a href="Niños.html">Niños</a></li>
                    <li><a href="Contacto.html">Contacto</a></li>
                </ul>
                <div class="d-flex align-items-center">
                    <div class="user-icon me-3" onclick="openUserLoginModal()">
                        <i class="ri-user-fill" style="font-size: 1.5rem; color: white; cursor: pointer;"></i>
                    </div>
                    <div class="cart-icon">
                        <a href="Carrito.html">
                            <i class="ri-shopping-cart-fill" style="font-size: 1.5rem; cursor: pointer;"></i>
                            <span class="cart-count" id="cart-count">0</span>
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <script>
        // JavaScript para abrir/cerrar el menú hamburguesa
        document.getElementById("menu-toggle").onclick = function () {
            document.getElementById("nav-links").classList.toggle("open");
        };
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Sección principal con imagen de fondo -->
    <section class="header" style="background-image: url('images/Bueno.jpg');">
        <h1>Bienvenido a Dream Style</h1>
    </section>

    <!-- Sección del Carrusel -->
    <div class="container">
        <div class="slider-wrapper">
            <div class="slider-description">
                <div class="slider-description-inner">
                </div>
                <div class="cd-intro">
                    <div class="cd-headline clip">
                        <span class="cd-words-wrapper">
                            <b class="is-visible">CREA TU ESTILO,</b>
                            <b>BORDA TUS IDEAS</b>
                            <b>¡LLEVALO PUESTO!</b>
                        </span>
                    </div>
                </div>
            </div>
            <div id="slider-ef" class="slider-images-wrapper owl-carousel">
                <div class="item">
                    <img class="img-responsive" src="https://res.cloudinary.com/dkqrigb7h/image/upload/v1732648936/image_1_galzat.jpg" alt="Imagen 1" />
                </div>
                <div class="item">
                    <img class="img-responsive" src="https://res.cloudinary.com/dkqrigb7h/image/upload/v1732648937/image_2_wrfhvz.jpg" alt="Imagen 2" />
                </div>
                <div class="item">
                    <img class="img-responsive" src="https://res.cloudinary.com/dkqrigb7h/image/upload/v1732648937/image_4_pqeaku.jpg" alt="Imagen 3" />
                </div>
            </div>
        </div>
    </div>

    <div class="container margin-top">
        <div class="history-wrapper">
            <div class="col-md-6 wow fadeInUp" data-wow-duration="0.6s" data-wow-delay="0.5s">
                <div class="row">
                    <article>
                        <h2>BORDADOS TEXTILES</h2>
                        <hr />
                        <h4>
                            Realizamos bordados textiles con diseños únicos y personalizados. <br />
                            Cuéntanos tu idea y la creamos para que la lleves puesta.
                        </h4>
                        <p>
                            <br />Sabemos que la ropa sufre desgaste por el uso y los lavados. Por eso decidimos
                            trabajar con productos de excelente calidad nacional e importados. En nuestra web
                            encontrarás toda la información general, <b>¡pero queremos escuchar tu idea!</b>
                        </p>
                    </article>
                </div>
            </div>
            <div class="col-md-5 col-md-offset-1 wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.3s">
                <div class="row">
                    <div id="history-images" class="owl-carousel">
                        <div>
                            <img class="img-responsive center-block" src="https://res.cloudinary.com/dkqrigb7h/image/upload/v1732648940/playerahombre_pb4kwi.jpg" alt="About" />
                        </div>
                        <div>
                            <img class="img-responsive center-block" src="https://res.cloudinary.com/dkqrigb7h/image/upload/v1732648938/ni%C3%B1avestido_c6ph8f.jpg" alt="About" />
                        </div>
                        <div>
                            <img class="img-responsive center-block" src="https://res.cloudinary.com/dkqrigb7h/image/upload/v1732648937/mujer_sudadera_uurvt8.jpg" alt="About" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/owl.carousel@2.3.4/dist/owl.carousel.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#slider-ef').owlCarousel({
                loop: true,
                margin: 0,
                nav: false,
                items: 1,
                autoplay: true,
                autoplayTimeout: 4000,
                autoplayHoverPause: true
            });

            $('#history-images').owlCarousel({
                loop: true,
                margin: 10,
                items: 1,
                autoplay: true,
                autoplayTimeout: 3000,
                autoplayHoverPause: true
            });
        });
    </script>
  

    <div class="Contenedor">
        <section class="Mapa">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3744.2975608971037!2d-99.2253934904862!3d20.204952415487238!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d3d66879fea89d%3A0xdd896a66614b30fb!2sITSOEH!5e0!3m2!1ses!2smx!4v1710732854523!5m2!1ses!2smx"
                width="600" height="400" style="border:0;" allowfullscreen="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
            <h3>Ubícanos</h3>
            <p>Dream style<br>Mixquiahuala de Juárez, Hgo., México</p>
            <div class="redes">
                <a href="https://www.facebook.com/favicon.ico" target="_blank"><i
                        class="ri-facebook-circle-fill"></i></a>
                <a href="https://www.instagram.com/" target="_blank"><i class="ri-instagram-fill"></i></a>
                <a href="https://www.whatsapp.com/" target="_blank"><i class="ri-whatsapp-line"></i></a>
            </div>
        </section>
    </div>

    <!-- Pie de página -->
    <footer>
        <p>2024 Dream Style. Todos los derechos reservados.</p>
        <div class="redes">
            <a href="https://www.facebook.com/favicon.ico" target="_blank"><i class="ri-facebook-circle-fill"></i></a>
            <a href="https://www.instagram.com/" target="_blank"><i class="ri-instagram-fill"></i></a>
            <a href="https://www.whatsapp.com/" target="_blank"><i class="ri-whatsapp-line"></i></a>
        </div>
    </footer>
    <link rel="stylesheet" href="styles.css">


    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-analytics.js";
    import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js";
    
    const firebaseConfig = {
        apiKey: "AIzaSyBLClY7hqBhBy-1qLTgjcnTxI3i-rvasDA",
        authDomain: "dreamstyle-56d32.firebaseapp.com",
        databaseURL: "https://dreamstyle-56d32-default-rtdb.firebaseio.com",
        projectId: "dreamstyle-56d32",
        storageBucket: "dreamstyle-56d32.firebasestorage.app",
        messagingSenderId: "188421473202",
        appId: "1:188421473202:web:424beeea5a4b6d507b5aab",
        measurementId: "G-D9REDB493L"
      };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const database = getDatabase(app);
    
    const activeModal = bootstrap.Modal.getInstance(document.querySelector('.modal.show'));
if (activeModal) {
    activeModal.hide();
}


        document.addEventListener('DOMContentLoaded', () => {
            const userLoginForm = document.getElementById('userLoginForm');
            const registerForm = document.getElementById('registerForm');
            const checkoutForm = document.getElementById('checkoutPurchaseForm');
            let cartItems = JSON.parse(localStorage.getItem('cart')) || [];

            function saveRegisterData() {
    const name = document.getElementById('registerName').value;
    const email = document.getElementById('registerEmail').value;
    const password = document.getElementById('registerPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;

    if (password !== confirmPassword) {
        alert('Las contraseñas no coinciden.');
        return;
    }

    const newUserRef = ref(database, 'Usuarios/' + Date.now());
    set(newUserRef, {
        name,
        email,
        password
    }).then(() => {
        alert('Registro exitoso. ¡Por favor inicia sesión!');
        document.getElementById('registerForm').reset();

        // Cerrar el modal de registro si existe y está inicializado
        const registerModalElement = document.getElementById('registerModal');
        if (registerModalElement) {
            const registerModal = bootstrap.Modal.getInstance(registerModalElement);
            if (registerModal) registerModal.hide();
        }

        // Abrir el modal de inicio de sesión
        const loginModalElement = document.getElementById('userLoginModal');
        if (loginModalElement) {
            const loginModal = new bootstrap.Modal(loginModalElement);
            loginModal.show();
        }
    }).catch((error) => {
        console.error('Error al registrar el usuario:', error);
        alert('Hubo un error al registrar el usuario. Intenta nuevamente.');
    });
}

function handleLogin() {
    const email = document.getElementById('userEmail').value;
    const password = document.getElementById('userPassword').value;

    const dbRef = ref(database);
    get(child(dbRef, 'Usuarios'))
        .then((snapshot) => {
            if (snapshot.exists()) {
                const users = snapshot.val();
                const user = Object.values(users).find(user => user.email === email && user.password === password);

                if (user) {
                    alert(`¡Bienvenido, ${user.name}!`);
                    window.location.href = 'Index.html'; // Redirigir al inicio
                } else {
                    alert('Correo o contraseña incorrectos.');
                }
            } else {
                alert('No hay usuarios registrados.');
            }
        })
        .catch((error) => {
            console.error('Error al iniciar sesión:', error);
            alert('Hubo un error al iniciar sesión. Intenta nuevamente.');
        });
}


            // Evento para el formulario de registro
            registerForm.addEventListener('submit', (event) => {
                event.preventDefault();
                saveRegisterData();
            });

            // Evento para el formulario de inicio de sesión
            userLoginForm.addEventListener('submit', (event) => {
                event.preventDefault();
                handleLogin();
            });
        });

    </script>

    <div class="modal fade" id="userLoginModal" tabindex="-1" aria-labelledby="userLoginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="row g-0">
                    <div class="col-md-6 d-none d-md-block">
                        <div class="login-image-container">
                            <img src="https://res.cloudinary.com/dkqrigb7h/image/upload/v1732648937/camisas_bwjqh5.jpg" alt="Login" class="login-image">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="modal-body p-4 p-md-5">
                            <h2 class="text-center mb-4">¡Bienvenido de nuevo!</h2>
                            <p class="text-secondary text-center mb-4">Introduce tu correo electrónico y contraseña.</p>

                            <form id="userLoginForm">
                                <div class="mb-3">
                                    <input type="email" class="form-control" id="userEmail" placeholder="Email"
                                        required>
                                </div>
                                <div class="mb-3">
                                    <label for="userPassword" class="form-label">Contraseña:</label>
                                    <input type="password" class="form-control" id="userPassword" required>
                                </div>
                                <div class="mb-3 d-flex justify-content-between align-items-center">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" id="userRemember">
                                        <label class="form-check-label" for="userRemember">Recuérdame</label>
                                    </div>
                                </div>
                               <button type="button" class="btn-primary w-100 py-2 mb-3" data-bs-toggle="modal" data-bs-target="#userLoginModal">Iniciar sesión</button>

                                    <button type="button" class="btn-secondary w-100 py-2 mb-3" data-bs-toggle="modal" data-bs-target="#registerModal">Registrarse</button>


                                <div class="text-center mb-3">
                                    <span class="text-secondary">o inicia sesión con</span>
                                </div>

                                <div class="d-flex justify-content-between gap-2">
                                    <button type="button"
                                        class="btn-outline-secondary w-50 d-flex align-items-center justify-content-center gap-2">
                                        <a href="https://www.google.com.mx/?hl=es" target="_blank"
                                            class="text-decoration-none">
                                            <img src="https://www.google.com/favicon.ico" alt="Google">
                                        </a>
                                    </button>
                                    <button type="button"
                                        class="btn-outline-secondary w-50 d-flex align-items-center justify-content-center gap-2">
                                        <a href="https://www.facebook.com/" target="_blank"
                                            class="text-decoration-none">
                                            <img src="https://www.facebook.com/favicon.ico" alt="Facebook">
                                        </a>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal de registro -->
    <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="registerModalLabel">Crear Cuenta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="registerForm">
                        <div class="mb-3">
                            <label for="registerName" class="form-label">Nombre Completo:</label>
                            <input type="text" class="form-control" id="registerName" required>
                        </div>
                        <div class="mb-3">
                            <label for="registerEmail" class="form-label">Correo Electrónico:</label>
                            <input type="email" class="form-control" id="registerEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="registerPassword" class="form-label">Contraseña:</label>
                            <input type="password" class="form-control" id="registerPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">Confirmar Contraseña:</label>
                            <input type="password" class="form-control" id="confirmPassword" required>
                        </div>
                        <button type="submit" class="btn-primary">Registrar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>



    <!-- Modal del carrito -->
    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cartModalLabel">Carrito de Compras</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Imagen</th>
                                <th>Nombre</th>
                                <th>Precio</th>
                                <th>Cantidad</th>
                                <th>Sub Total</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="cart-tbody"></tbody>
                    </table>
                    <div class="d-flex justify-content-between">
                        <strong>Total:</strong>
                        <span id="total-amount">$0.00</span>
                    </div>
                    <div>

                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-success" onclick="showCheckout()">Proceder a la compra</button>

                    </div>
                    <div id="checkout-container" style="display:none;">
                        <h2>Formulario de Compra</h2>
                        <form id="checkoutPurchaseForm">
                            <div class="mb-3">
                                <label for="checkoutNombre" class="form-label">Nombre completo:</label>
                                <input type="text" class="form-control" id="checkoutNombre" required>
                            </div>
                            <div class="mb-3">
                                <label for="checkoutEmail" class="form-label">Correo electrónico:</label>
                                <input type="email" class="form-control" id="checkoutEmail" required>
                            </div>
                            <div class="mb-3">
                                <label for="checkoutDireccion" class="form-label">Dirección de envío:</label>
                                <input type="text" class="form-control" id="checkoutDireccion" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Finalizar compra</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const checkoutForm = document.getElementById('checkoutPurchaseForm');
            let cartItems = JSON.parse(localStorage.getItem('cart')) || [];

            checkoutForm.addEventListener('submit', function (event) {
                event.preventDefault();
                saveCheckoutData();
            });

            function saveCheckoutData() {
                const nombreCompleto = document.getElementById('checkoutNombre').value;
                const email = document.getElementById('checkoutEmail').value;
                const direccionEnvio = document.getElementById('checkoutDireccion').value;

                const total = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);

                alert('Compra realizada con éxito. ¡Gracias por su compra¡');

                // Limpiar carrito
                cartItems = [];
                localStorage.removeItem('cart');
                renderCart();
                checkoutForm.reset();
                document.getElementById('checkout-container').style.display = 'none'; // Ocultar formulario
                const cartModal = bootstrap.Modal.getInstance(document.getElementById('cartModal'));
                cartModal.hide(); // Cerrar el modal
            }

            function renderCart() {
                const cartTbody = document.getElementById('cart-tbody');
                cartTbody.innerHTML = '';
                let totalAmount = 0;
                let totalCount = 0; // Contador de productos

                cartItems.forEach((item, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                <td><img src="${item.image}" alt="${item.name}" style="max-width: 50px;"></td>
                <td>${item.name}</td>
                <td>$${item.price.toFixed(0)}</td>
                <td><input type="number" value="${item.quantity}" min="1" onchange="updateQuantity(${index}, this.value)"></td>
                <td>$${(item.price * item.quantity).toFixed(0)}</td>
                <td><button class="btn btn-danger btn-sm" onclick="removeFromCart(${index})">Eliminar</button></td>
            `;
                    cartTbody.appendChild(row);
                    totalAmount += item.price * item.quantity;
                    totalCount += item.quantity; // Sumar cantidad al contador
                });

                document.getElementById('total-amount').textContent = `$${totalAmount.toFixed(0)}`;
                document.getElementById('cart-count').textContent = totalCount; // Actualizar contador de productos
            }

            window.updateQuantity = function (index, quantity) {
                cartItems[index].quantity = parseInt(quantity);
                localStorage.setItem('cart', JSON.stringify(cartItems));
                renderCart();
            };

            window.removeFromCart = function (index) {
                cartItems.splice(index, 1);
                localStorage.setItem('cart', JSON.stringify(cartItems));
                renderCart();
            };

            window.addToCart = function (name, price, image) {
                const item = { name, price, quantity: 1, image };
                cartItems.push(item);
                localStorage.setItem('cart', JSON.stringify(cartItems));
                renderCart();
                alert(`${name} ha sido añadido al carrito.`);
            };

            window.openCartModal = function () {
                if (cartItems.length === 0) {
                    alert("El carrito está vacío.");
                } else {
                    renderCart();
                    const cartModal = new bootstrap.Modal(document.getElementById('cartModal'));
                    cartModal.show();
                }
            };

            window.showCheckout = function () {
                document.getElementById('checkout-container').style.display = 'block'; // Mostrar formulario
            };

            renderCart();
        });
    </script>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>

</html>
